#include <LiquidCrystal.h>
#define pirPin 10
int calibrationTime = 30;
long unsigned int lowIn;
long unsigned int pause = 5000;
boolean lockLow = true;
boolean takeLowTime;
int PIRValue = 0;
int i =0;
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {
  Serial.begin(9600);
  pinMode(pirPin, INPUT);
  lcd.begin(16, 2);
  lcd.print("Initializing");
  while(i<=100){
  		lcd.setCursor(0,1);
		  lcd.print(i);
    	lcd.setCursor(3,1);
    	lcd.print("%");
    	i++;
    	
  	}
    delay(2000);
  	lcd.clear();
}

void loop() {
	PIRSensor();
}

void PIRSensor() {
   if(digitalRead(pirPin) == HIGH) {
      if(lockLow) {
         PIRValue = 1;
         lockLow = false;
		 lcd.setCursor(0,0);
         lcd.print("Motion detected.");
         delay(50);
      }
      takeLowTime = true;
    
   }
   if(digitalRead(pirPin) == LOW) {
      if(takeLowTime){
         lowIn = millis();takeLowTime = false;
      }
      if(!lockLow && millis() - lowIn > pause) {
         PIRValue = 0;
         lockLow = true;
         lcd.setCursor(0,0);
         lcd.print("Motion ended.");
         delay(50);
      }
   }
}
